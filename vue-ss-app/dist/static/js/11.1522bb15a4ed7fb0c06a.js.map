{"version":3,"sources":["webpack:///src/components/Utils/PopupRowCol.vue","webpack:///./src/components/Utils/PopupRowCol.vue?636e","webpack:///./src/components/Utils/PopupRowCol.vue"],"names":["PopupRowCol","name","components","RowCol","__webpack_require__","e","then","bind","VanPopup","props","dataSource","Array","mark","String","Number","type","inExtObj","Object","data","options","loading","model","methods","closeEvn","result","errcode","this","close","item","$emit","popupBack","search","searchPromise","waterFallSearchName","console","log","_this","promise_default","a","resolve","reject","$axiosPost","post","APIUTL","response","catch","error","created","_this2","params","url","action","sphh","errmsg","userid","tzid","$axios","get","_result","dataList","numberOfElements","typeSetList","JSON","parse","content","typeSet","i","length","o","waterFallList","j","rowList","k","cols","push","span","colSize","text","wname","_result2","_result3","_result4","watch","Utils_PopupRowCol","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","staticStyle","max-height","attrs","round","position","on","callback","$$v","goback","staticRenderFns","Component","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/11.1522bb15a4ed7fb0c06a.js","sourcesContent":["<template>\r\n  <van-popup\r\n    v-model=\"model\"\r\n    v-loading=\"loading\"\r\n    round\r\n    @close=\"closeEvn\"\r\n    position=\"bottom\"\r\n    style=\"max-height: 300px\"\r\n  >\r\n    <RowCol :dataList=\"options\" @goback=\"popupBack\"></RowCol>\r\n  </van-popup>\r\n</template>\r\n\r\n<script>\r\nimport { Popup as VanPopup } from \"vant\";\r\n\r\nexport default {\r\n  name: \"PopupRowCol\",\r\n  components: {\r\n    RowCol: () => import(\"@/components/Utils/RowCol\"),\r\n    VanPopup,\r\n  },\r\n  props: {\r\n    dataSource: Array, //数据源\r\n    mark: [String, Number], //外部调用的标识,回调是统一的,所以需要一个标识是哪个父对象调用的\r\n    type: String, //指定内容\r\n    inExtObj: Object, //附加属性,是一个对象,在发送请求的时候会带上这部份参数\r\n  },\r\n  data: function () {\r\n    return {\r\n      options: [], //内容对应的值,因为显示的内容只允许是一个字符串数组,其它信息保存在这里\r\n      // rowList:[],//显示的内容\r\n      loading: true,\r\n      model: true,\r\n    };\r\n  },\r\n  methods: {\r\n    closeEvn() {\r\n      let result = {};\r\n      result.errcode = 0;\r\n      result.data = null;\r\n      this.close(result);\r\n    },\r\n\r\n    close(item) {\r\n      this.model = false;\r\n      this.$emit(\"goback\", this.type, this.mark, item); //回调父函数\r\n    },\r\n\r\n    popupBack(item) {\r\n      let result = {};\r\n      result.errcode = 0;\r\n      result.data = item;\r\n      this.close(item.data);\r\n    },\r\n    search() {\r\n      this.searchPromise(this.waterFallSearchName).then((result) => {\r\n        console.log(result);\r\n        return result;\r\n      });\r\n      return false;\r\n    },\r\n\r\n    searchPromise(waterFallSearchName) {\r\n      return new Promise((resolve, reject) => {\r\n        this.$axiosPost\r\n          .post(\r\n            APIUTL +\r\n              \"?serviceName=svr-waterfall&action=waterfalls/search/1/100\",\r\n            { name: waterFallSearchName }\r\n          )\r\n          .then((response) => {\r\n            resolve(response.data);\r\n          })\r\n          .catch((error) => {\r\n            reject(error);\r\n          });\r\n      });\r\n    },\r\n  },\r\n  created: function () {\r\n    if (this.dataSource) {\r\n      this.options = this.dataSource;\r\n      return false;\r\n    }\r\n    var params = {};\r\n    var url = APIUTL;\r\n    if (this.type == \"fwsphh\") {\r\n      params.action = \"factoryWash/sphh\";\r\n      params.sphh = this.inExtObj.sphh;\r\n      if (!this.inExtObj.sphh) {\r\n        let result = {};\r\n        result.errcode = 100;\r\n        result.errmsg = \"请输入货号\";\r\n        this.close(result);\r\n        return;\r\n      }\r\n\r\n      params.userid = this.inExtObj.userid;\r\n      params.tzid = 1;\r\n      url = APIUTL + \"?serviceName=svr-external\";\r\n    }\r\n    this.$axios\r\n      .get(url, {\r\n        params: params,\r\n      })\r\n      .then((response) => {\r\n        if (response.data.errcode != 0) {\r\n          let result = {};\r\n          result.errcode = 100;\r\n          result.errmsg = response.data.errmsg;\r\n          this.close(result);\r\n          return;\r\n        }\r\n        let dataList=[];\r\n        if (this.type == \"fwsphh\") dataList = response.data.data;\r\n\r\n        this.searchPromise(this.type).then((result) => {\r\n          if (result.errcode == 0) {\r\n            if (result.data[0].numberOfElements == 1) {\r\n              //只有一条记录\r\n              let typeSetList = JSON.parse(result.data[0].content[0].typeSet);\r\n\r\n              for (var i = 0; i < dataList.length; i++) {\r\n                let o = {};\r\n                o.waterFallList = [];\r\n                o.data = dataList[i];\r\n                for (var j = 0; j < typeSetList.length; j++) {\r\n                  let rowList = [];\r\n                  for (var k = 0; k < typeSetList[j].cols.length; k++) {\r\n                    rowList.push({\r\n                      span: typeSetList[j].cols[k].colSize,\r\n                      text: dataList[i][typeSetList[j].cols[k].wname],\r\n                    });\r\n                    // console.log(rowList)\r\n                  }\r\n                  o.waterFallList.push(rowList);\r\n                }\r\n                this.options.push(o);\r\n              }\r\n              this.loading = false;\r\n              // console.log(this.options);\r\n            } else if (result.data[0].numberOfElements > 1) {\r\n              //多条不处理\r\n              let result = {};\r\n              result.errcode = 100;\r\n              result.errmsg = \"查询多条\";\r\n              this.close(result);\r\n            } else {\r\n              //没记录\r\n              let result = {};\r\n              result.errcode = 100;\r\n              result.errmsg = \"查询没记录\";\r\n              this.close(result);\r\n            }\r\n          } else {\r\n            let result = {};\r\n            result.errcode = 100;\r\n            result.errmsg = \"查询失败\";\r\n            this.close(result);\r\n          }\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n  watch: {},\r\n};\r\n</script>\r\n\r\n \n\n\n// WEBPACK FOOTER //\n// src/components/Utils/PopupRowCol.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('van-popup',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"max-height\":\"300px\"},attrs:{\"round\":\"\",\"position\":\"bottom\"},on:{\"close\":_vm.closeEvn},model:{value:(_vm.model),callback:function ($$v) {_vm.model=$$v},expression:\"model\"}},[_c('RowCol',{attrs:{\"dataList\":_vm.options},on:{\"goback\":_vm.popupBack}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-cf4335ac\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Utils/PopupRowCol.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PopupRowCol.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PopupRowCol.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cf4335ac\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./PopupRowCol.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Utils/PopupRowCol.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}