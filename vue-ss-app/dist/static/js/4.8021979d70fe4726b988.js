webpackJsonp([4],{"+XGz":function(t,e){},H6GD:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("//Fk"),l=a.n(n),d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"CollecBtn"}},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"","background-color":"#545c64",mode:"horizontal","text-color":"#fff","active-text-color":"#ffd04b"}},[a("el-button",{staticClass:"menu-item",on:{click:function(e){return t.CollecBtnClose()}}},[t._v("关闭")]),t._v(" "),a("el-button",{staticClass:"menu-item",on:{click:function(e){return t.CollecBtnMySave()}}},[t._v("保存")]),t._v(" "),a("el-button",{staticClass:"menu-item",on:{click:function(e){return t.CollecBtnMyDel()}}},[t._v("删除")])],1)],1)},staticRenderFns:[]};var i=a("VU/8")({name:"CollecBtn",data:function(){return{}},methods:{init:function(){},CollecBtnMySave:function(){this.$emit("collecBtnMySave")},CollecBtnMyDel:function(){this.$emit("collecBtnMyDel")},CollecBtnClose:function(){this.$emit("collecBtnClose")}},watch:{},mounted:function(){}},d,!1,function(t){a("vpsV")},"data-v-0e46a7e1",null).exports,o={name:"DevNumPicker",props:{devNum:String,devDisabled:Boolean},data:function(){return{devNumTemp:this.devNum,options:[]}},created:function(){var t=this;this.$axios.get(APIUTL,{params:{action:"getDevNumList"}}).then(function(e){5010!=e.data.errcode?t.options=e.data.data:t.$message({showClose:!0,message:e.data.errmsg,type:"error"})}).catch(function(t){console.log(t)})},watch:{devNumTemp:function(t,e){this.$emit("update:devNum",this.devNumTemp)},devNum:function(t){this.devNumTemp=t}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{staticClass:"cursor-default",attrs:{disabled:t.devDisabled,placeholder:"请选择"},model:{value:t.devNumTemp,callback:function(e){t.devNumTemp=e},expression:"devNumTemp"}},t._l(t.options,function(t){return a("el-option",{key:t.dm,attrs:{label:t.mc,value:t.dm}})}),1)},staticRenderFns:[]};var s=a("VU/8")(o,c,!1,function(t){a("+XGz")},"data-v-57a4284d",null).exports,r=a("BO1k"),u=a.n(r),m={name:"MassProductionQualityChdmSelect",props:{chdm:String,chmc:String,djid:Number,disabled:Boolean,devNum:String},data:function(){return{options:[],chdmTemp:this.chdm,list:[],loading:!1}},mounted:function(){},methods:{cancalReadOnly:function(t){var e=this;this.$nextTick(function(){t||e.$refs.select.$el.querySelector(".el-input__inner").removeAttribute("readonly")})},remoteMethod:function(t){var e=this;""!==t&&""!=this.devNum&&t.length>=6?(this.loading=!0,setTimeout(function(){e.loadAll(e.devNum,t,function(t){e.loading=!1,e.options=[];var a=!0,n=!1,l=void 0;try{for(var d,i=u()(t);!(a=(d=i.next()).done);a=!0){var o=d.value;e.options.push({chdmvalue:o.chdm,chmcvalue:o.chmc,label:o.chdm,djid:o.id,desc:{bsbz:o.bsbz,rsbz:o.rsbz,zzbz:o.zzbz,rsgybz:o.rsgybz,hzbz:o.hzbz,cpbz:o.cpbz}})}}catch(t){n=!0,l=t}finally{try{!a&&i.return&&i.return()}finally{if(n)throw l}}})},3e3)):this.options=[]},loadAll:function(t,e,a){var n=this;this.$axios.get(APIUTL,{params:{action:"getSGChdm",kfbh:t,chdm:e}}).then(function(t){0==t.data.errcode?a(t.data.data):n.$message({showClose:!0,message:t.data.errmsg,type:"error"})}).catch(function(t){console.log(t)})}},watch:{chdmTemp:function(t,e){if(t){var a=this.options.find(function(e){return e.chdmvalue===t});this.$emit("update:chdm",t),this.$emit("update:djid",a.djid),this.$emit("update:desc",a.desc),this.$emit("update:chmc",a.chmcvalue)}},chdm:function(t){this.chdmTemp=t,""==t&&(this.options=[])}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-select",{ref:"select",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"输入至少6位",disabled:t.disabled,"remote-method":t.remoteMethod,loading:t.loading},on:{"hook:mounted":t.cancalReadOnly,"visible-change":t.cancalReadOnly},model:{value:t.chdmTemp,callback:function(e){t.chdmTemp=e},expression:"chdmTemp"}},t._l(t.options,function(t){return a("el-option",{key:t.chdmvalue,attrs:{label:t.label,value:t.chdmvalue}})}),1)},staticRenderFns:[]},p={name:"MassProductionQuality",components:{CollecBtn:i,DevNumPicker:s,MassProductionQualityChdmSelect:a("VU/8")(m,h,!1,null,null,null).exports,Upload:a("/6FY").a},data:function(){return{mdata:{chdm:"",chmc:"",devNum:"",djid:0,desc:{}},lxDataList:[{lx:"bsbz",title:"备纱",groupid:2801},{lx:"rsbz",title:"染纱",groupid:2802},{lx:"zzbz",title:"织造",groupid:2803},{lx:"rsgybz",title:"染色工艺",groupid:2804},{lx:"hzbz",title:"后整工序",groupid:2805},{lx:"cpbz",title:"成品品质 ",groupid:2806}],uploadVisible:!1,groupid:-1,uploadQx:!1}},methods:{init:function(){},CollecBtnMySave:function(){var t=this;return new l.a(function(e,a){var n=new Object;n.kfbh=t.mdata.devNum,n.djid=t.mdata.djid,null==n.djid&&(n.djid=0),n.chdm=t.mdata.chdm,n.bsbz=t.mdata.desc.bsbz,null==n.bsbz&&(n.bsbz=""),n.rsbz=t.mdata.desc.rsbz,null==n.rsbz&&(n.rsbz=""),n.zzbz=t.mdata.desc.zzbz,null==n.zzbz&&(n.zzbz=""),n.rsgybz=t.mdata.desc.rsgybz,null==n.rsgybz&&(n.rsgybz=""),n.hzbz=t.mdata.desc.hzbz,null==n.hzbz&&(n.hzbz=""),n.cpbz=t.mdata.desc.cpbz,null==n.cpbz&&(n.cpbz=""),t.$axiosPost.post(APIUTL+"?action=SaveSGChdm",n).then(function(n){0==n.data.errcode?(console.log(n.data.data[0][0].id),t.mdata.djid=n.data.data[0][0].id,t.$message("保存成功"),e("ok")):a(n)})})},CollecBtnMyDel:function(){console.log("del")},CollecBtnClose:function(){console.log("CCC")},openUpload:function(t,e,a){var n=this;if(this.uploadQx=e,this.groupid=a,this.mdata.djid<=0){if(0!=this.mdata.devNum.length&&0!=this.mdata.chdm.length)return this.CollecBtnMySave().then(function(t){"ok"==t&&(n.uploadVisible=!0)});this.$message("请选择材料和开发编码")}else this.uploadVisible=!0}},mounted:function(){},watch:{"mdata.devNum":function(t,e){t!=e&&(this.mdata.chdm="",this.mdata.chmc="",this.mdata.djid=0,this.mdata.desc={})}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"MassProductionQuality"}},[a("CollecBtn",{ref:"CollecBtn",on:{collecBtnMySave:t.CollecBtnMySave,collecBtnMyDel:t.CollecBtnMyDel,collecBtnClose:t.CollecBtnClose}}),t._v(" "),a("el-form",{staticStyle:{"margin-top":"20px"},attrs:{model:t.mdata,"label-width":"70px","label-position":"right"}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:24}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"开发编号"}},[a("DevNumPicker",{attrs:{devNum:t.mdata.devNum,devDisabled:!1},on:{"update:devNum":function(e){return t.$set(t.mdata,"devNum",e)},"update:dev-num":function(e){return t.$set(t.mdata,"devNum",e)}}})],1)],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"材料编号"}},[a("MassProductionQualityChdmSelect",{attrs:{devNum:t.mdata.devNum,chdm:t.mdata.chdm,chmc:t.mdata.chmc,djid:t.mdata.djid,desc:t.mdata.desc,disabled:!(t.mdata.devNum.length>0)},on:{"update:chdm":function(e){return t.$set(t.mdata,"chdm",e)},"update:chmc":function(e){return t.$set(t.mdata,"chmc",e)},"update:djid":function(e){return t.$set(t.mdata,"djid",e)},"update:desc":function(e){return t.$set(t.mdata,"desc",e)}}})],1)],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"材料名称"}},[t._v("\n              "+t._s(t.mdata.chmc)+"\n            ")])],1)],1)],1)],1),t._v(" "),t._l(t.lxDataList,function(e){return a("div",{key:e.lx,staticClass:"text item"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(e.title))]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.openUpload(e.lx,!0,e.groupid)}}},[t._v("上传附件")]),t._v(" "),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(a){return t.openUpload(e.lx,!1,e.groupid)}}},[t._v("查看附件")])],1),t._v(" "),a("div",{staticClass:"text item"},[a("el-input",{attrs:{type:"textarea"},model:{value:t.mdata.desc[e.lx],callback:function(a){t.$set(t.mdata.desc,e.lx,a)},expression:"mdata.desc[item.lx]"}})],1)])],1)})],2),t._v(" "),a("Upload",{attrs:{visible:t.uploadVisible,groupidIn:t.groupid,tableidIn:t.mdata.djid,qx:t.uploadQx},on:{"update:visible":function(e){t.uploadVisible=e}}})],1)},staticRenderFns:[]},f=a("VU/8")(p,v,!1,null,null,null);e.default=f.exports},vpsV:function(t,e){}});
//# sourceMappingURL=4.8021979d70fe4726b988.js.map